<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#history"><span class="toc-section-number">1.1</span> History</a></li>
</ul></li>
<li><a href="#installation"><span class="toc-section-number">2</span> Installation</a><ul>
<li><a href="#omnidb-application"><span class="toc-section-number">2.1</span> OmniDB Application</a></li>
<li><a href="#omnidb-server"><span class="toc-section-number">2.2</span> OmniDB Server</a><ul>
<li><a href="#omnidb-user-database"><span class="toc-section-number">2.2.1</span> OmniDB User Database</a></li>
<li><a href="#omnidb-in-the-browser"><span class="toc-section-number">2.2.2</span> OmniDB in the browser</a></li>
</ul></li>
</ul></li>
<li><a href="#creating-users-and-connections"><span class="toc-section-number">3</span> Creating Users and Connections</a><ul>
<li><a href="#logging-in-as-user-admin"><span class="toc-section-number">3.1</span> Logging in as user <em>admin</em></a></li>
<li><a href="#creating-another-user"><span class="toc-section-number">3.2</span> Creating another user</a></li>
<li><a href="#signing-in-as-the-new-user"><span class="toc-section-number">3.3</span> Signing in as the new user</a></li>
<li><a href="#creating-connections"><span class="toc-section-number">3.4</span> Creating connections</a></li>
</ul></li>
<li><a href="#managing-databases"><span class="toc-section-number">4</span> Managing Databases</a><ul>
<li><a href="#sections-of-the-workspace-window"><span class="toc-section-number">4.1</span> Sections of the <em>Workspace</em> window</a></li>
<li><a href="#connection-outer-tab"><span class="toc-section-number">4.2</span> Connection Outer Tab</a></li>
<li><a href="#working-with-databases"><span class="toc-section-number">4.3</span> Working with databases</a></li>
<li><a href="#working-with-multiple-tabs-inside-the-same-connection"><span class="toc-section-number">4.4</span> Working with multiple tabs inside the same connection</a></li>
</ul></li>
<li><a href="#creating-changing-and-removing-tables"><span class="toc-section-number">5</span> Creating, Changing and Removing Tables</a><ul>
<li><a href="#creating-tables"><span class="toc-section-number">5.1</span> Creating tables</a></li>
<li><a href="#editing-tables"><span class="toc-section-number">5.2</span> Editing tables</a></li>
<li><a href="#removing-tables"><span class="toc-section-number">5.3</span> Removing tables</a></li>
</ul></li>
<li><a href="#managing-table-data"><span class="toc-section-number">6</span> Managing Table Data</a></li>
<li><a href="#writing-sql-queries"><span class="toc-section-number">7</span> Writing SQL Queries</a></li>
<li><a href="#visualizing-data"><span class="toc-section-number">8</span> Visualizing Data</a><ul>
<li><a href="#simple-graph"><span class="toc-section-number">8.1</span> Simple graph</a></li>
<li><a href="#complete-graph"><span class="toc-section-number">8.2</span> Complete graph</a></li>
</ul></li>
<li><a href="#managing-other-postgresql-elements"><span class="toc-section-number">9</span> Managing other PostgreSQL Elements</a></li>
<li><a href="#additional-features"><span class="toc-section-number">10</span> Additional Features</a><ul>
<li><a href="#sql-history"><span class="toc-section-number">10.1</span> SQL History</a></li>
<li><a href="#user-settings"><span class="toc-section-number">10.2</span> User Settings</a></li>
</ul></li>
<li><a href="#omnidb-config-tool"><span class="toc-section-number">11</span> OmniDB Config Tool</a><ul>
<li><a href="#create-super-user"><span class="toc-section-number">11.1</span> Create super user</a></li>
<li><a href="#vacuum"><span class="toc-section-number">11.2</span> Vacuum</a></li>
<li><a href="#reset-database"><span class="toc-section-number">11.3</span> Reset database</a></li>
</ul></li>
</ul>
</div>
<h1 id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p><strong>OmniDB</strong> is an open source browser-based app designed to access and manage many different Database Management systems, e.g. PostgreSQL, Oracle and MySQL. OmniDB can run either as an App or via Browser, combining the flexibility needed for various access paths with a design that puts security first. OmniDB is actively developed, automatically tested on a variety of databases and browsers and comes with full documentation.</p>
<p>Since early development, OmniDB was designed as an browser-based app. Consequently, it runs in any browser, from any operational system. It can be accessed by several computers and multiple users, each one of them with his/her own group of connections. It also can be hosted in any operational system, without the need of install any dependencies. We will see further details on installation in the next chapters.</p>
<p>OmniDB’s main objective is to offer an unified workspace with all functionalities needed to manipulate different DMBS. DBMS specific tools aren’t required: in OmniDB, the context switch between different DBMS is done with a simple connection switch, without leaving the same page. The end-user’s sensation is that there is no difference when he/she manipulates different DBMS, it just feels like different connections.</p>
<p>Despite this, OmniDB is built with simplicity in mind, designed to be a fast and lightweight browser-based application. OmniDB is also powered by the WebSocket technology, allowing the user to execute multiple queries and procedures in multiple databases in multiple hosts in background.</p>
<p>OmniDB is also secure. All OmniDB user data are stored encrypted, and no database password is stored at all. When the user first connects to a database, OmniDB asks for the password. This password is encrypted and stored in memory for a specific amount of time. When this time expires, OmniDB asks the password again. This ensures maximum security for the database OmniDB is connecting to.</p>
<h2 id="history"><span class="header-section-number">1.1</span> History</h2>
<p><strong>OmniDB</strong>’s creators, Rafael Thofehrn Castro and William Ivanski, worked in a company where they needed to deal with several different databases from customers on a daily basis. These databases were from different DBMS technologies, and so they needed to keep switching between database management tools (typically one for each DBMS). As they were not keen of the existing unified database management tools (that could manage different DBMS), they came up with OmniDB’s main idea.</p>
<p><strong>OmniDB</strong>’s first version was presented as an undergrad final project in the Computer Science Course from the Federal University of Paraná, in Brazil. The objective was to trace a common line between popular DBMS, and to study deeply their <em>metadata</em>. The result was a tool written in ASP.NET/C# capable of connecting and identifying the main structures (tables, keys, indexes and constraints), in a generic way, from several DBMS:</p>
<ul>
<li>Firebird</li>
<li>MariaDB / MySQL</li>
<li>Oracle</li>
<li>PostgreSQL</li>
<li>SQLite</li>
<li>Microsoft SQL Server</li>
</ul>
<p>OmniDB’s first version also allowed the conversion between all DBMSs supported by the tool. This feature was developed to be user friendly, requiring just a few steps: the user needs to select a source connection, the structures that will be converted (just tables and all their structures, along with their data) and the target connection.</p>
<h1 id="installation"><span class="header-section-number">2</span> Installation</h1>
<p>OmniDB provides 2 kinds of packages to fit every user needs:</p>
<ul>
<li><strong>OmniDB Application</strong>: Runs a web server on a random port behind, and provides a simplified web browser window to use OmniDB interface without any additional setup. Just feels like a desktop application.</li>
<li><strong>OmniDB Server</strong>: Runs a web server on a random port. User needs to connect to it through a web browser. Provides user management, ideal to be hosted on a server on users' networks.</li>
</ul>
<p>Both application and server can be installed on the same machine.</p>
<h2 id="omnidb-application"><span class="header-section-number">2.1</span> OmniDB Application</h2>
<p>In order to run OmniDB app, you don't need to install any additional piece of software. Just head to <a href="omnidb.org" class="uri">omnidb.org</a> and download the latest package for your specific operating system and architecture:</p>
<ul>
<li>Linux 32 bits / 64 bits
<ul>
<li>DEB installer</li>
<li>RPM installer</li>
</ul></li>
<li>Windows 32 bits / 64 bits
<ul>
<li>EXE installer</li>
</ul></li>
<li>Mac OSX
<ul>
<li>DMG installer</li>
</ul></li>
</ul>
<p>Use the specific installer for your Operational System and it will be available through your desktop environment application menu or via command line with <code>omnidb-app</code>.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_001.png" /></p>
<h2 id="omnidb-server"><span class="header-section-number">2.2</span> OmniDB Server</h2>
<p>Like OmniDB app, OmniDB server doesn't require any additional piece of software and the same options for operating system and architecture are provided.</p>
<p>Use the specific installer for your Operational System and it will be available through command line with <code>omnidb-server</code>.</p>
<p>You will need administrator privileges:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ sudo omnidb-server
<span class="ex">Starting</span> OmniDB websocket...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> websocket server at port 25482.
<span class="ex">OmniDB</span> successfully migrated user database from version 0.0.0 to version 2.4.0
<span class="ex">Starting</span> OmniDB server...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> server OmniDB 2.4.0 at 0.0.0.0:8000.
<span class="ex">Open</span> OmniDB in your favorite browser
<span class="ex">Press</span> Ctrl+C to exit</code></pre></div>
<p>Note how OmniDB starts a <em>websocket server</em> in a random port (in the above example it started in port 25482) and a <em>web server</em> in port 8000. You can also specify websocket server port, web server port and listening address:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ sudo omnidb-server -p 8080 -w 2000 -H 127.0.0.1
<span class="ex">Starting</span> OmniDB websocket...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> websocket server at port 2000.
<span class="ex">OmniDB</span> successfully migrated user database from version 0.0.0 to version 2.4.0
<span class="ex">Starting</span> OmniDB server...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> server OmniDB 2.4.0 at 127.0.0.1:8080.
<span class="ex">Open</span> OmniDB in your favorite browser</code></pre></div>
<p>Starting on version 2.1.0, OmniDB server comes with a configuration file <code>omnidb.conf</code> that enables the user to specify parameters such as port and listening address. Also, 2.1.0 enables us to start the server with SSL, this requires a certificate and is configured in the same configuration file.</p>
<h3 id="omnidb-user-database"><span class="header-section-number">2.2.1</span> OmniDB User Database</h3>
<p>Since version 2.4.0, upon initialization both server and app will create a file <code>~/.omnidb/omnidb.db</code> in the user home directory, if it does not exist. That is being done by the message <em>OmniDB successfully migrated user database from version 0.0.0 to version 2.4.0</em> you saw above. This file is also called <strong>user database</strong> and contains user data. If it already exists, then OmniDB will check whether the version of the server matches the version of the user database:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ sudo omnidb-server
<span class="ex">Starting</span> OmniDB websocket...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> websocket server at port 25482.
<span class="ex">User</span> database version 2.4.0 is already matching server version.
<span class="ex">Starting</span> OmniDB server...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> server OmniDB 2.4.0 at 0.0.0.0:8000.
<span class="ex">Open</span> OmniDB in your favorite browser
<span class="ex">Press</span> Ctrl+C to exit</code></pre></div>
<p>Future releases of OmniDB will contain the <strong>user database migration</strong> SQL commands required to upgrade the user database, if necessary. This way user data is not lost by upgrading OmniDB. Imagine the following scenario: you use OmniDB 2.4.0 now and you decide to upgrade it to newest release 2.5.0, for example. After the upgrade, when you start OmniDB server, it will apply the changes version 2.5.0 requires. So you will see something like that:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ sudo omnidb-server
<span class="ex">Starting</span> OmniDB websocket...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> websocket server at port 25482.
<span class="ex">OmniDB</span> successfully migrated user database from version 2.4.0 to version 2.5.0
<span class="ex">Starting</span> OmniDB server...
<span class="ex">Checking</span> port availability...
<span class="ex">Starting</span> server OmniDB 2.5.0 at 0.0.0.0:8000.
<span class="ex">Open</span> OmniDB in your favorite browser
<span class="ex">Press</span> Ctrl+C to exit</code></pre></div>
<h3 id="omnidb-in-the-browser"><span class="header-section-number">2.2.2</span> OmniDB in the browser</h3>
<p>Now that the web server is running, you may access OmniDB browser-based app on your favorite browser. Type in address bar: <code>localhost:8000</code> and hit <code>Enter</code>. If everything went fine, you shall see a page like this:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_002.png" /></p>
<p>Now you know that OmniDB is running correctly. In the next chapters, we will see how to login for the first time, how to create an user and to utilize OmniDB.</p>
<h1 id="creating-users-and-connections"><span class="header-section-number">3</span> Creating Users and Connections</h1>
<h2 id="logging-in-as-user-admin"><span class="header-section-number">3.1</span> Logging in as user <em>admin</em></h2>
<p>OmniDB comes only with the user <em>admin</em>. If you are using the server version, the first thing to do is sign in as <em>admin</em>, the default password is <em>admin</em>. You don't need to login in the app version.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_003.png" /></p>
<p>The next window is the <strong>Connections</strong> window. We will talk about it later.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_004.png" /></p>
<h2 id="creating-another-user"><span class="header-section-number">3.2</span> Creating another user</h2>
<p>Click on the <em>Users</em> icon on the upper right corner. It will open a popup that allows the current OmniDB super user to create a new OmniDB user.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_005.png" /></p>
<p>After clicking on the <em>Users</em> icon the tool inserts a new user called <em>user2</em> (if that is the first user after <em>admin</em>).</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_006.png" /></p>
<p>You will have to change the <em>username</em> and <em>password</em>. Check if you want this new user to be a <em>super user</em>. This user management window is only seem by super users. When you are done, click on the <em>Save Data</em> button inside the popup.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_007.png" /></p>
<p>You can create as many users as you want, edit existing users and also delete users by clicking on the red cross at the actions column. Now you can logout.</p>
<h2 id="signing-in-as-the-new-user"><span class="header-section-number">3.3</span> Signing in as the new user</h2>
<p>Let us sign in as the user we just created.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_008.png" /></p>
<p>And we can see the <strong>Connections</strong> window again. Note that now there is no <em>Users</em> icon, because the <em>test</em> user is not a super user.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_009.png" /></p>
<h2 id="creating-connections"><span class="header-section-number">3.4</span> Creating connections</h2>
<p>OmniDB C# version supported several DBMS. At the moment, OmniDB Python version, or <code>OmniDB 2.0</code>, supports only PostgreSQL. More DBMS support is being added as you read this.</p>
<p>We will now create two connections to PostgreSQL databases. To create the connections you have to click on the button <em>New Connection</em> and then choose the connection and fill the other fields. After filling all the fields for both connections, click on the <em>Save Data</em> button.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_010.png" /></p>
<p>For each connection there is an <em>Actions</em> column where you can delete, test and select them. Go ahead and test one of the connections.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_011.png" /></p>
<p>Notice the <em>Password Expired</em> pop-up. This is happening because OmniDB does not store the database user password on disk. When the user types a password in this popup, the password is encrypted and stored in memory.</p>
<p>After you type the password and hit <em>Enter</em>, if the connection to the database is successful you will see a confirmation pop-up.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_012.png" /></p>
<p>But, if you have trouble of any kind connecting to your PostgreSQL database, the <em>Password Expired</em> popup will remain showing the error OmniDB got.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_013.png" /></p>
<p>Also, in the connections grid, if you click on the <em>Select Connection</em> action, OmniDB will open it in the <strong>Workspace Window</strong>.</p>
<h1 id="managing-databases"><span class="header-section-number">4</span> Managing Databases</h1>
<p>After creating at least one connection the user can enter the <em>Workspace</em>, either by clicking the <em>Workspace</em> tab or by clicking in the <em>Select Connection</em> action in the connections grid.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_014.png" /></p>
<h2 id="sections-of-the-workspace-window"><span class="header-section-number">4.1</span> Sections of the <em>Workspace</em> window</h2>
<p>This interface has several elements:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_015.png" /></p>
<ul>
<li><strong>1) Links</strong>: Enables the user to navigate between OmniDB windows</li>
<li><strong>2) Outer Tabs</strong>: OmniDB lets you work with several databases at the same time. Each database will be accessible through an <em>outer tab</em>. Outer tabs also can host miscellaneous features, like the <em>Snippets</em> feature</li>
<li><strong>3) Options</strong>: Shows the current user logged in, and also links for <em>user settings</em>, <em>query history</em>, <em>information</em> and <em>logout</em>.</li>
</ul>
<h2 id="connection-outer-tab"><span class="header-section-number">4.2</span> Connection Outer Tab</h2>
<p>So, the outer table named <em>Test</em> has this name because of the alias we put in the connection to the <code>testdb</code>. This tab is a <em>Connection Outer Tab</em>. Notice the little tab with a cross besides the <em>Test</em> outer tab. This allows you to create a new outer tab that will automatically be a <em>Connection Outer Tab</em>. However, the <em>Snippet Outer Tab</em> is fixed and will always be the first.</p>
<p>A new <em>Connection Outer Tab</em> will always automatically point to the first connection on your list of database connections. Or, if you clicked on the <em>Select Connection</em> action, it will point to the selected connection. Observe the elements inside of this tab:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_016.png" /></p>
<ul>
<li><strong>1) Connection Selector</strong>: Shows all connections and lets the user select the current one</li>
<li><strong>2) Tree of Structures</strong>: Displays a hierarchical tree where you can navigate through the database elements</li>
<li><strong>3) Inner Tabs</strong>: Allows the user to execute actions in the current database. There are several kinds of inner tabs for the current database. By clicking on the last small tab with a cross, you can add a new tab. A new tab always will be a <em>Query Tab</em>, where you can write any kind of SQL statement</li>
<li><strong>4) Inner Tab Content</strong>: Can vary depending on the kind of inner tab. The figure shows a <em>Query Tab</em> and in this case the content will be an <em>SQL Editor</em>, with syntax highlight and autocomplete</li>
<li><strong>5) Inner Tab Actions</strong>: Can vary depending on the kind of inner tab. For a <em>Query Tab</em>, they are <em>Execute Button</em>, <em>Format Button</em> and <em>Editor Mode</em> (script, execute or query)</li>
<li><strong>6) Inner Tab Results</strong>: A <em>Query Tab</em> in query mode, after you click in the <em>Execute Button</em> or type the execute shortcut (<code>Alt-Q</code>), will show a grid with the query results. All modes will show error messages, if any.</li>
</ul>
<h2 id="working-with-databases"><span class="header-section-number">4.3</span> Working with databases</h2>
<p>Take a look at your connections selector. OmniDB always points to the first available connection but you can change it by clicking on the selector.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_017.png" /></p>
<p>Select the <em>DellStore</em> connection. Now go to the tree right below the selector and click to expand the node <em>Schemas</em>.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_018.png" /></p>
<p>Bear in mind that every 10 minutes you keep without performing actions on the database, will trigger a <em>Password Expired</em> popup. As explained before, this is important for your database security. After you type the correct password, you will see all schemas in your database (in case of PostgreSQL, <code>TOAST</code> and temp schemas are not shown).</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_019.png" /></p>
<p>Now click to expand the schema <code>public</code>. You will see different kinds of elements contained in this schema.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_020.png" /></p>
<p>Now click to expand the node <em>Tables</em>, and you will see all tables contained in the schema <code>public</code>. Expand any table and you will see its columns, primary key, foreign keys, unique constraints and indexes. Each column is also expansible, displaying data type and nullable constraint.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_021.png" /></p>
<p>In order to view records inside a table, right click it and choose <em>Data Actions &gt; Query Data</em>.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_022.png" /></p>
<p>Notice that OmniDB fills the current SQL editor with a simple query to list table records. The records are displayed in a grid right below the editor. This grid can be controlled with keyboard as if you were using a spreadsheet manager. You can also copy data from single cells or block of cells (that can be selected with the keyboard or mouse) and paste on any spreadsheet manager.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_023.png" /></p>
<p>You can edit the query on the SQL editor, writing simple or more complex queries and clicking on the action button. You can control how many records should be displayed (10, 100, 1000 or all rows). More details in the next chapters.</p>
<h2 id="working-with-multiple-tabs-inside-the-same-connection"><span class="header-section-number">4.4</span> Working with multiple tabs inside the same connection</h2>
<p>Inside a single connection, you can create several inner tabs by clicking on the last little tab with a cross. Each new inner tab will be a <em>Query Tab</em>.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_024.png" /></p>
<p>On OmniDB, you can execute several SQL statements and procedures in parallel. When it is executing, an icon will be shown in the tab to indicate its current state. If some process is finished and it is not in the current tab, that tab will show a green icon indicating the routine being executed there is now finished.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_025.png" /></p>
<p>By clicking in the <em>Cancel button</em>, you can cancel a process running inside the database.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_026.png" /></p>
<p>You can also drag and drop a tab to change its order. This works with both inner and outer tabs.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_027.png" /></p>
<p>Additionally, you can use keyboard shortcuts to manage inner tabs (SQL Query) and outer tabs (Connection):</p>
<ul>
<li><strong>Ctrl-Insert</strong>: Insert a new inner tab</li>
<li><strong>Ctrl-Delete</strong>: Removes an inner tab</li>
<li><strong>Ctrl-&lt;</strong>: Change focus to inner tab at left</li>
<li><strong>Ctrl-&gt;</strong>: Change focus to inner tab at right</li>
<li><strong>Ctrl-Shift-Insert</strong>: Insert a new outer tab</li>
<li><strong>Ctrl-Shift-Delete</strong>: Removes an outer tab</li>
<li><strong>Ctrl-Shift-&lt;</strong>: Change focus to outer tab at left</li>
<li><strong>Ctrl-Shift-&gt;</strong>: Change focus to outer tab at right</li>
</ul>
<h1 id="creating-changing-and-removing-tables"><span class="header-section-number">5</span> Creating, Changing and Removing Tables</h1>
<h2 id="creating-tables"><span class="header-section-number">5.1</span> Creating tables</h2>
<p>OmniDB has a table creation interface that lets you configure columns, constraints and indexes. A couple of observations should be mentioned:</p>
<ul>
<li>Most DBMS automatically create indexes when primary keys and unique constraints are created. Because of that, the indexes tab is only available after creating the table.</li>
<li>Each DBMS has its unique characteristics and limitations regarding table creation and the OmniDB interface reflects these limitations. For instance, SQLite does not allow us to change existing columns and constraints. Because of that, the interface lets us change only table name and add new columns when dealing with SQLite databases (it is still not the case in OmniDB Python version, as it currently supports only PostgreSQL databases).</li>
</ul>
<p>We will create example tables (<em>Customer</em> and <em>Address</em>) in the <code>testdb</code> database we connected to earlier. Right click on the <strong>Tables</strong> node and select the <strong>New Table</strong> action:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_028.png" /></p>
<p>We will create the table <em>Customer</em> with a primary key that will be referenced by the table <em>Address</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_029.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_030.png" /></p>
<p>Note how the table appers in the <em>Tables</em> tree node:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_031.png" /></p>
<p>Now create the table <em>Address</em> with a primary key and a foreign key:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_032.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_033.png" /></p>
<p>At this point we have two tables in schema <code>public</code>. The schema structure can be seen with the graph feature by right clicking on the schema <code>public</code> node of the tree and selecting <em>Render Graph &gt; Simple Graph</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_034.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_035.png" /></p>
<p>And this is what the <em>Complete Graph</em> looks like:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_036.png" /></p>
<h2 id="editing-tables"><span class="header-section-number">5.2</span> Editing tables</h2>
<p>OmniDB also lets you edit existing tables (always following DBMS limitations). To test this feature we will add a new column to the table <em>Customer</em>. To access the alter table interface just right click the table node and select the action <em>Table Actions &gt; Alter Table</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_037.png" /></p>
<p>Add the column <em>cust_age</em> and save:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_038.png" /></p>
<p>The interface is capable of detecting errors that may occur during alter table operations, showing the command and the error that occurred. To demonstrate it we will try to add the column <em>cust_name</em>, which already belongs to this table:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_039.png" /></p>
<h2 id="removing-tables"><span class="header-section-number">5.3</span> Removing tables</h2>
<p>In order to remove a table just right click the table node and select the action <em>Table Actions &gt; Drop Table</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_040.png" /></p>
<h1 id="managing-table-data"><span class="header-section-number">6</span> Managing Table Data</h1>
<p>The tool allow us to edit records contained in tables through a very simple and intuitive interface. Given that only a few DBMS have unique identifiers for table records, we opted to allow data editing and removal only for tables that have primary keys. Tables that do not have it can only receive new records.</p>
<p>To access the record editing interface, right click the table node and select the action <em>Data Actions &gt; Edit Data</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_041.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_042.png" /></p>
<p>The interface has a SQL editor where you can filter and order records. To prevent that the interface requests too many records, there is a field that limits the number of records to be displayed. The records grid has column names and data types. Columns that belong to the primary key have a key icon next to their names.</p>
<p>The row of the grid that have the symbol <code>*</code> is the row to add new records. Let us insert some records in the table <code>Customer</code>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_043.png" /></p>
<p>After saving, the records will be inserted and can be edited (only because this table has a primary key). Let’s change the <em>cust_name</em> of some of the existing records:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_044.png" /></p>
<p>Tables can have fields with values represented by very long strings. To help edit these fields, OmniDB has an interface that can be accessed by right clicking the specific cell:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_045.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_046.png" /></p>
<p>The interface detects errors that may occur during operations related to records. To demonstrate, let us insert two records with existing <code>cust_id</code> (primary key):</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_047.png" /></p>
<p>It shows which commands tried to be executed and the respective errors.</p>
<p>To complete this chapter, let’s add some records to the <em>Address</em> table:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_048.png" /></p>
<h1 id="writing-sql-queries"><span class="header-section-number">7</span> Writing SQL Queries</h1>
<p>The tool comes with a tab system where each tab contains a SQL editor, an action button, an indent button, a field to select the type of command and a space to display the result.</p>
<p>The SQL editor has a feature that helps a lot when creating new queries: SQL code completion. With this feature it is possible to autocomplete columns contained in a table referenced by an alias. To open the autocomplete interface you just have to type the alias and then the dot character:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_049.png" /></p>
<p>Besides autocompleting table columns the editor also searches for columns contained in subqueries:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_050.png" /></p>
<p>The field to select the type of command has the following options:</p>
<ul>
<li><strong>Script</strong>: script execution, which is a sequence of commands separated by semicolon:</li>
</ul>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_051.png" /></p>
<p>The return shows the response time, the number of commands that were successfully executed, the number of commands that generated errors and a list displaying each error.</p>
<ul>
<li><p><strong>Execute</strong>: execution of only one command. The return shows the response time or an error.</p></li>
<li><p><strong>Query (10, 100, 1000, all) rows</strong>: execution of a query that returns a set of records, which are displayed on a grid. Just like in the record editing interface each cell can be visualized separately by right clicking it:</p></li>
</ul>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_052.png" /></p>
<h1 id="visualizing-data"><span class="header-section-number">8</span> Visualizing Data</h1>
<p>This feature displays a graph with nodes representing tables and edges representing table relationships with foreign keys. Using the mouse, the user is able to zoom in, zoom out, and drag and drop nodes to change its position.</p>
<p>There are two types of graphs: <em>Simple Graph</em> and <em>Complete Graph</em>.</p>
<h2 id="simple-graph"><span class="header-section-number">8.1</span> Simple graph</h2>
<p>To access it just right click the root node of the tree and then select the action <em>Render Graph &gt; Simple Graph</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_053.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_054.png" /></p>
<h2 id="complete-graph"><span class="header-section-number">8.2</span> Complete graph</h2>
<p>This graph displays tables with all its columns and respective data types. Additionally, edges now are labeled with information about the specific foreign key. To access it just right click the root node of the tree and then select the action <em>Render Graph &gt; Complete Graph</em>:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_055.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_056.png" /></p>
<h1 id="managing-other-postgresql-elements"><span class="header-section-number">9</span> Managing other PostgreSQL Elements</h1>
<p>With the exception of tables, all PostgreSQL structures are possible to be managed with the use of <em>SQL templates</em>. This gives the user more power than using graphical forms to manipulate structures.</p>
<p>For example, let's consider the sequences inside the schema <code>public</code> of the database <code>testdb</code>. To create a new sequence, right click on the <em>Sequences</em> node, and choose <em>New Sequence</em>.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_057.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_058.png" /></p>
<p>After you change the name of the sequence, you can uncomment other command options and set them accordingly to your needs. When all the command looks fine, you can click on the <em>Execute button</em> and the new sequence will be created:</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_059.png" /></p>
<p>With right click on an existing sequence, you can alter or drop it. It will work the same way as the creation, by using a SQL template for the user to change.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_060.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_061.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_062.png" /></p>
<h1 id="additional-features"><span class="header-section-number">10</span> Additional Features</h1>
<h2 id="sql-history"><span class="header-section-number">10.1</span> SQL History</h2>
<p>Every interaction the user does with every database is logged in OmniDB's <em>SQL History</em>. To access it you need to click on the clock-like icon on the upper right corner. OmniDB will show a pop-up with all actions in a paginated grid.</p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_063.png" /></p>
<p>Each action shows date time it started, the time it ended, the duration, the mode, the status and the command. As every grid in OmniDB, you can right click on the command and click <em>View Content</em>, where another pop-up will open showing the content in a larger text editor.</p>
<h2 id="user-settings"><span class="header-section-number">10.2</span> User Settings</h2>
<p>Also in the upper right corner, by clicking in the gear-like icon, OmniDB will open the <em>User Settings</em> pop-up. It is composed by two tabs:</p>
<ul>
<li><p><strong>User</strong>: Allows the user to change its password. More user settings will be added in future.</p></li>
<li><p><strong>Editor</strong>: Allows the user to change the font size of the SQL Editor, and also change the entire OmniDB theme. There are a lot of OmniDB themes, each of them change the syntax highlight color of the editor. They are also categorized in light and dark themes. A light theme is the default; a dark theme will change the entire interface of OmniDB.</p></li>
</ul>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_064.png" /></p>
<p>Every change in user settings require that you either:</p>
<ul>
<li>Refresh the page, if you are using OmniDB server and the interface through a web browser; or</li>
<li>Open and close OmniDB, if you are using OmniDB app.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_065.png" /></p>
<p><img src="https://raw.githubusercontent.com/OmniDB/doc/master/img/image_066.png" /></p>
<h1 id="omnidb-config-tool"><span class="header-section-number">11</span> OmniDB Config Tool</h1>
<p>Every installation of OmniDB also comes with a small CLI utility called <em>OmniDB Config</em>. It will have a different file name, depending on the way you installed OmniDB:</p>
<ul>
<li>If you are using a tarball or zip package, it is called <strong>omnidb-config</strong>, for both server and app versions;</li>
<li>If you used an installer (like the .deb file) of server version, it is called <strong>omnidb-config-server</strong>;</li>
<li>If you used an installer of app version, it is called <strong>omnidb-config-app</strong>.</li>
</ul>
<p>Despite having different names, the utility does exactly the same. If you used an installer, it will be put in your <code>$PATH</code>.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$  omnidb-config-app --help
<span class="ex">Usage</span>: omnidb-config-app [options]

<span class="ex">Options</span>:
  <span class="ex">--version</span>             show program<span class="dt">\&#39;</span>s version number and exit
  <span class="ex">-h</span>, --help            show this help message and exit
  <span class="ex">-c</span> username password, --createsuperuser=username password
                        <span class="ex">create</span> super user: -c username password
  <span class="ex">-a</span>, --vacuum          databases maintenance
  <span class="ex">-r</span>, --resetdatabase   reset databases</code></pre></div>
<h2 id="create-super-user"><span class="header-section-number">11.1</span> Create super user</h2>
<p>Option <code>-c</code> allows you to create a new super user, without needing to open OmniDB interface.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ omnidb-config-app -c william password
<span class="ex">Creating</span> superuser...
<span class="ex">Superuser</span> created.</code></pre></div>
<h2 id="vacuum"><span class="header-section-number">11.2</span> Vacuum</h2>
<p>OmniDB has two databases:</p>
<ul>
<li><code>omnidb.db</code>: Stores all users and connections, and other OmniDB related stuff;</li>
<li><em>Sessions database</em>: Stores Django user sessions.</li>
</ul>
<p>Both databases are SQLite, so it can be useful to vacuum them sometimes to reduce file size. This can be done with the <code>-a</code> option.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ omnidb-config-app -a
<span class="ex">Vacuuming</span> OmniDB database...
<span class="ex">Done.</span>
<span class="ex">Vacuuming</span> Sessions database...
<span class="ex">Done.</span></code></pre></div>
<h2 id="reset-database"><span class="header-section-number">11.3</span> Reset database</h2>
<p>If you wish to wipe out all OmniDB information and get a clean database as it was just installed, you can use the <code>-r</code> option. Use it with caution!</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ omnidb-config-app -r
<span class="ex">***</span> ATENTION *** ALL USERS DATA WILL BE LOST
<span class="ex">Would</span> you like to continue? (y/n) <span class="ex">y</span>
<span class="ex">Cleaning</span> users...
<span class="ex">Done.</span>
<span class="ex">Cleaning</span> sessions...
<span class="ex">Vacuuming</span> OmniDB database...
<span class="ex">Done.</span>
<span class="ex">Vacuuming</span> Sessions database...
<span class="ex">Done.</span></code></pre></div>
</body>
</html>
