<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
</head>
<body>
<h1 id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p><em>DBMS</em> stands for <em>database management system</em>. It may be a simple function library or even a larger system composed by several programs and processes running separately and in parallel, whose main function is to manage one or several databases hosted in a server. It has the responsibility to manipulate and to keep the consistency of data, allowing the software developers to focus on functionalities. Thus, practically any modern system that manages data utilizes some kind of DBMS, regardless of the amount of stored information.</p>
<p><strong>OmniDB</strong>’s creators, Rafael Thofehrn Castro and William Ivanski, worked in a company where they needed to deal with several different databases from customers on a daily basis. These databases were from different DBMS technologies, and so they needed to keep switching between database management tools (typically one for each DBMS). As they were not keen of the existing unified database management tools (that could manage different DBMS), they came up with OmniDB’s main idea.</p>
<p><strong>OmniDB</strong>’s first version was presented as an undergrad final project in the Computer Science Course from the Federal University of Paraná, in Brazil. The objective was to trace a common line between popular DBMS, and to study deeply their <em>metadata</em>. The result was a tool written in ASP.NET/C# capable of connecting and identifying the main structures (tables, keys, indexes and constraints), in a generic way, from several DBMS:</p>
<ul>
<li>Firebird</li>
<li>MariaDB / MySQL</li>
<li>Oracle</li>
<li>PostgreSQL</li>
<li>SQLite</li>
<li>Microsoft SQL Server</li>
</ul>
<p>OmniDB’s first version also allowed the conversion between all DBMSs supported by the tool. This feature was developed to be user friendly, requiring just a few steps: the user needs to select a source connection, the structures that will be converted (just tables and all their structures, along with their data) and the target connection.</p>
<p>Since early development, OmniDB was designed as an web app. Consequently, it runs in any browser, from any operational system. It can be accessed by several computers and multiple users, each one of them with his/her own group of connections. It also can be hosted in any operational system, without the need of install any dependencies. We will see further details on installation in the next chapters.</p>
<p>OmniDB’s main objective is to offer an unified workspace with all functionalities needed to manipulate different DMBS. DBMS specific tools aren’t required: in OmniDB, the context switch between different DBMS is done with a simple connection switch, without leaving the same page. The end-user’s sensation is that there is no difference when he/she manipulates different DBMS, it just feels like different connections.</p>
<p>Despite this, OmniDB is built with simplicity in mind, designed to be a fast and lightweight web application. OmniDB is also powered by the WebSocket technology, allowing the user to execute multiple queries and procedures in multiple databases in multiple hosts in background.</p>
<p>OmniDB is also secure. All OmniDB user data are stored encrypted, and no database password is stored at all. When the user first connects to a database, OmniDB asks for the password. This password is encrypted and stored in memory for a specific amount of time. When this time expires, OmniDB asks the password again. This ensures maximum security for the database OmniDB is connecting to.</p>
<h1 id="migration-from-.net-mono-to-python"><span class="header-section-number">2</span> Migration from .NET / Mono to Python</h1>
<p>OmniDB was rewritten to Python using the Django framework. Starting from version <code>2.0</code>, OmniDB Python version will receive new features and will be actively maintained.</p>
<p>The source code for the ASP.NET/C# version is in the branch <code>csharp</code>. The next release of OmniDB C# version is 1.7, and it will only receive bug fixes.</p>
<p>OmniDB source code is hosted on <a href="https://github.com/OmniDB/OmniDB">GitHub</a> and there are 3 main branches:</p>
<ul>
<li><strong>master</strong>: Contains the current beta release of OmniDB Python version</li>
<li><strong>dev</strong>: Contains the current development release of OmniDB Python version</li>
<li><strong>csharp</strong>: Contains the .NET / Mono version of OmniDB</li>
</ul>
<p>Besides being written in Python, initial version of OmniDB 2.0 contains the following main differences from the C# version:</p>
<ul>
<li>Support to HTTPS;</li>
<li>It allows query execution in background and cancellation through the use of websockets;</li>
<li>There is a new Snippet feature;</li>
<li>Log capabilities and a test suite are almost finished;</li>
<li>Initially, only an improved support of PostgreSQL is implemented. More RDBMS support coming soon;</li>
<li>Database conversion feature was disabled by now, but it will be re-enabled soon;</li>
<li>You don't need to install dependencies and web servers any more. Everything OmniDB needs is now bundled together.</li>
</ul>
<h1 id="installation"><span class="header-section-number">3</span> Installation</h1>
<p>OmniDB provides 2 kinds of packages to fit every user needs:</p>
<ul>
<li><strong>OmniDB Application</strong>: Runs a web server on a random port behind, and provides a simplified web server window to use OmniDB interface without any additional setup. Just feels like a desktop application.</li>
<li><strong>OmniDB Server</strong>: Runs a web server on a random port. User needs to connect to it through a web browser. Provides user management, ideal to be hosted on a server on users' networks.</li>
</ul>
<p>Both application and server can be installed on the same machine.</p>
<h2 id="omnidb-application"><span class="header-section-number">3.1</span> OmniDB Application</h2>
<p>In order to run OmniDB app, you don't need to install any additional piece of software. Just head to <a href="omnidb.org" class="uri">omnidb.org</a> and download the latest package for your specific operating system and architecture:</p>
<ul>
<li>Linux 32 bits / 64 bits
<ul>
<li>DEB installer</li>
<li>RPM installer</li>
<li>Tarball</li>
</ul></li>
<li>Windows 32 bits / 64 bits
<ul>
<li>EXE installer</li>
<li>ZIP package</li>
</ul></li>
<li>Mac OSX
<ul>
<li>DMG installer</li>
<li>ZIP package</li>
</ul></li>
</ul>
<p>If you choose tarball or zip packages, just extract it somewhere in your computer. Get inside the folder it creates and run the <code>omnidb-app</code> executable. It will open OmniDB inside its own window.</p>
<p>With the installer you can install OmniDB in your system, and it will be available through your desktop environment application menu. When you launch it, OmniDB will open its own window.</p>
<p><img src="../img/03_installation_01.png" /></p>
<h2 id="omnidb-server"><span class="header-section-number">3.2</span> OmniDB Server</h2>
<p>Like OmniDB app, OmniDB server doesn't require any additional piece of software and the same options for operating system and architecture are provided.</p>
<p>If you choose the tarball or zip package, extract it somewhere in your computer. Get inside the uncompressed folder and run the <code>omnidb-server</code> executable.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ cd omnidb-server
<span class="ex">user@machine</span>:~/omnidb-server$ ./omnidb
<span class="ex">Starting</span> OmniDB 2.0.2 at http://localhost:8000
<span class="ex">Open</span> OmniDB in your favorite browser
<span class="ex">Press</span> Ctrl+C to exit</code></pre></div>
<p>If you installed OmniDB server with some installer option, you will need administrator privileges:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">user@machine</span>:~$ sudo omnidb-server
<span class="ex">Starting</span> OmniDB 2.0.2 at http://localhost:8000
<span class="ex">Open</span> OmniDB in your favorite browser
<span class="ex">Press</span> Ctrl+C to exit</code></pre></div>
<p>Now that the web server is running, you may access OmniDB web app on your favorite browser. Type in address bar: <code>localhost:8000</code> and hit <code>Enter</code>. If everything went fine, you shall see a page like this:</p>
<p><img src="../img/03_installation_02.png" /></p>
<p>Now you know that OmniDB is running correctly. In the next chapters, we will see how to login for the first time, how to create an user and to utilize OmniDB.</p>
<h1 id="creating-users-and-connections"><span class="header-section-number">4</span> Creating Users and Connections</h1>
<h2 id="logging-in-as-user-admin"><span class="header-section-number">4.1</span> Logging in as user <em>admin</em></h2>
<p>OmniDB comes only with the user <em>admin</em>. If you are using the server version, the first thing to do is sign in as <em>admin</em>, the default password is <em>admin</em>. You don't need to login in the app version.</p>
<p><img src="../img/04_creating_users_and_connections_01.png" /></p>
<p>The next window is the <strong>Connections</strong> window. We will talk about it later.</p>
<p><img src="../img/04_creating_users_and_connections_02.png" /></p>
<h2 id="creating-another-user"><span class="header-section-number">4.2</span> Creating another user</h2>
<p>Click on the <em>Users</em> icon on the upper right corner. It will open a popup that allows the current OmniDB super user to create a new OmniDB user.</p>
<p><img src="../img/04_creating_users_and_connections_03.png" /></p>
<p>After clicking on the <em>Users</em> icon the tool inserts a new user called <em>user2</em> (if that is the first user after <em>admin</em>).</p>
<p><img src="../img/04_creating_users_and_connections_04.png" /></p>
<p>You will have to change the <em>username</em> and <em>password</em>. Check if you want this new user to be a <em>super user</em>. This user management window is only seem by super users. When you are done, click on the <em>Save Data</em> button inside the popup.</p>
<p><img src="../img/04_creating_users_and_connections_05.png" /></p>
<p>You can create as many users as you want, edit existing users and also delete users by clicking on the red cross at the actions column. Now you can logout.</p>
<h2 id="signing-in-as-the-new-user"><span class="header-section-number">4.3</span> Signing in as the new user</h2>
<p>Let us sign in as the user we just created.</p>
<p><img src="../img/04_creating_users_and_connections_06.png" /></p>
<p>And we can see the <strong>Connections</strong> window again. Note that now there is no <em>Users</em> icon, because the <em>test</em> user is not a super user.</p>
<p><img src="../img/04_creating_users_and_connections_07.png" /></p>
<h2 id="creating-connections"><span class="header-section-number">4.4</span> Creating connections</h2>
<p>OmniDB C# version supported several DBMS. At the moment, OmniDB Python version, or <code>OmniDB 2.0</code>, supports only PostgreSQL. More DBMS support is being added as you read this.</p>
<p>We will now create two connections to PostgreSQL databases. To create the connections you have to click on the button <em>New Connection</em> and then choose the connection and fill the other fields. After filling all the fields for both connections, click on the <em>Save Data</em> button.</p>
<p><img src="../img/04_creating_users_and_connections_08.png" /></p>
<p>For each connection there is an <em>Actions</em> column where you can delete, test and select them. Go ahead and test one of the connections.</p>
<p><img src="../img/04_creating_users_and_connections_09.png" /></p>
<p>Notice the <em>Password Expired</em> pop-up. This is happening because OmniDB does not store the database user password on disk. When the user types a password in this popup, the password is encrypted and stored in memory.</p>
<p>After you type the password and hit <em>Enter</em>, if the connection to the database is successful you will see a confirmation pop-up.</p>
<p><img src="../img/04_creating_users_and_connections_10.png" /></p>
<p>But, if you have trouble of any kind connecting to your PostgreSQL database, the <em>Password Expired</em> popup will remain showing the error OmniDB got.</p>
<p><img src="../img/04_creating_users_and_connections_11.png" /></p>
<p>Also, in the connections grid, if you click on the <em>Select Connection</em> action, OmniDB will open it in the <strong>Workspace Window</strong>.</p>
<h1 id="workspace"><span class="header-section-number">5</span> Workspace</h1>
<p>After creating at least one connection the user can enter the <em>Workspace</em>, either by clicking the <em>Workspace</em> tab or by clicking in the <em>Select Connection</em> action in the connections grid.</p>
<p><img src="../img/05_workspace_01.png" /></p>
<h2 id="sections-of-the-workspace-window"><span class="header-section-number">5.1</span> Sections of the <em>Workspace</em> window</h2>
<p>This interface has several elements:</p>
<p><img src="../img/05_workspace_02.png" /></p>
<ul>
<li><strong>1) Links</strong>: Enables the user to navigate between OmniDB windows</li>
<li><strong>2) Outer Tabs</strong>: OmniDB lets you work with several databases at the same time. Each database will be accessible through an <em>outer tab</em>. Outer tabs also can host miscellaneous features, like the <em>Snippets</em> feature</li>
<li><strong>3) Options</strong>: Shows the current user logged in, and also links for <em>user settings</em>, <em>query history</em>, <em>information</em> and <em>logout</em>.</li>
</ul>
<h2 id="connection-outer-tab"><span class="header-section-number">5.2</span> Connection Outer Tab</h2>
<p>So, the outer table named <em>Test</em> has this name because of the alias we put in the connection to the <code>testdb</code>. This tab is a <em>Connection Outer Tab</em>. Notice the little tab with a cross besides the <em>Test</em> outer tab. This allows you to create a new outer tab that will automatically be a <em>Connection Outer Tab</em>. However, the <em>Snippet Outer Tab</em> is fixed and will always be the first.</p>
<p>A new <em>Connection Outer Tab</em> will always automatically point to the first connection on your list of database connections. Or, if you clicked on the <em>Select Connection</em> action, it will point to the selected connection. Observe the elements inside of this tab:</p>
<p><img src="../img/05_workspace_04.png" /></p>
<ul>
<li><strong>1) Connection Selector</strong>: Shows all connections and lets the user select the current one</li>
<li><strong>2) Tree of Structures</strong>: Displays a hierarchical tree where you can navigate through the database elements</li>
<li><strong>3) Inner Tabs</strong>: Allows the user to execute actions in the current database. There are several kinds of inner tabs for the current database. By clicking on the last small tab with a cross, you can add a new tab. A new tab always will be a <em>Query Tab</em>, where you can write any kind of SQL statement</li>
<li><strong>4) Inner Tab Content</strong>: Can vary depending on the kind of inner tab. The figure shows a <em>Query Tab</em> and in this case the content will be an <em>SQL Editor</em>, with syntax highlight and autocomplete</li>
<li><strong>5) Inner Tab Actions</strong>: Can vary depending on the kind of inner tab. For a <em>Query Tab</em>, they are <em>Execute Button</em>, <em>Format Button</em> and <em>Editor Mode</em> (script, execute or query)</li>
<li><strong>6) Inner Tab Results</strong>: A <em>Query Tab</em> in query mode, after you click in the <em>Execute Button</em> or type the execute shortcut (<code>Alt-Q</code>), will show a grid with the query results. All modes will show error messages, if any.</li>
</ul>
<h2 id="working-with-databases"><span class="header-section-number">5.3</span> Working with databases</h2>
<p>Take a look at your connections selector. OmniDB always points to the first available connection but you can change it by clicking on the selector.</p>
<p><img src="../img/05_workspace_05.png" /></p>
<p>Select the <em>DellStore</em> connection. Now go to the tree right below the selector and click to expand the node <em>Schemas</em>.</p>
<p><img src="../img/05_workspace_06.png" /></p>
<p>Bear in mind that every 10 minutes you keep without performing actions on the database, will trigger a <em>Password Expired</em> popup. As explained before, this is important for your database security. After you type the correct password, you will see all schemas in your database (in case of PostgreSQL, <code>TOAST</code> and temp schemas are not shown).</p>
<p><img src="../img/05_workspace_07.png" /></p>
<p>Now click to expand the schema <code>public</code>. You will see different kinds of elements contained in this schema.</p>
<p><img src="../img/05_workspace_08.png" /></p>
<p>Now click to expand the node <em>Tables</em>, and you will see all tables contained in the schema <code>public</code>. Expand any table and you will see its columns, primary key, foreign keys, unique constraints and indexes. Each column is also expansible, displaying data type and nullable constraint.</p>
<p><img src="../img/05_workspace_09.png" /></p>
<p>In order to view records inside a table, right click it and choose <em>Data Actions &gt; Query Data</em>.</p>
<p><img src="../img/05_workspace_10.png" /></p>
<p>Notice that OmniDB fills the current SQL editor with a simple query to list table records. The records are displayed in a grid right below the editor. This grid can be controlled with keyboard as if you were using a spreadsheet manager. You can also copy data from single cells or block of cells (that can be selected with the keyboard or mouse) and paste on any spreadsheet manager.</p>
<p><img src="../img/05_workspace_11.png" /></p>
<p>You can edit the query on the SQL editor, writing simple or more complex queries and clicking on the action button. You can control how many records should be displayed (10, 100, 1000 or all rows). More details in the next chapters.</p>
<h2 id="working-with-multiple-tabs-inside-the-same-connection"><span class="header-section-number">5.4</span> Working with multiple tabs inside the same connection</h2>
<p>Inside a single connection, you can create several inner tabs by clicking on the last little tab with a cross. Each new inner tab will be a <em>Query Tab</em>.</p>
<p><img src="../img/05_workspace_12.png" /></p>
<p>On OmniDB, you can execute several SQL statements and procedures in parallel. When it is executing, an icon will be shown in the tab to indicate its current state. If some process is finished and it is not in the current tab, that tab will show a green icon indicating the routine being executed there is now finished.</p>
<p><img src="../img/05_workspace_13.png" /></p>
<p>By clicking in the <em>Cancel button</em>, you can cancel a process running inside the database.</p>
<p><img src="../img/05_workspace_14.png" /></p>
<p>You can also drag and drop a tab to change its order. This works with both inner and outer tabs.</p>
<p><img src="../img/05_workspace_15.png" /></p>
<p>Additionally, you can use keyboard shortcuts to manage inner tabs (SQL Query) and outer tabs (Connection):</p>
<ul>
<li><strong>Ctrl-Insert</strong>: Insert a new inner tab</li>
<li><strong>Ctrl-Delete</strong>: Removes an inner tab</li>
<li><strong>Ctrl-&lt;</strong>: Change focus to inner tab at left</li>
<li><strong>Ctrl-&gt;</strong>: Change focus to inner tab at right</li>
<li><strong>Ctrl-Shift-Insert</strong>: Insert a new outer tab</li>
<li><strong>Ctrl-Shift-Delete</strong>: Removes an outer tab</li>
<li><strong>Ctrl-Shift-&lt;</strong>: Change focus to outer tab at left</li>
<li><strong>Ctrl-Shift-&gt;</strong>: Change focus to outer tab at right</li>
</ul>
<h1 id="table-management"><span class="header-section-number">6</span> Table Management</h1>
<h2 id="creating-tables"><span class="header-section-number">6.1</span> Creating tables</h2>
<p>OmniDB has a table creation interface that lets you configure columns, constraints and indexes. A couple of observations should be mentioned:</p>
<ul>
<li>Most DBMS automatically create indexes when primary keys and unique constraints are created. Because of that, the indexes tab is only available after creating the table.</li>
<li>Each DBMS has its unique characteristics and limitations regarding table creation and the OmniDB interface reflects these limitations. For instance, SQLite does not allow us to change existing columns and constraints. Because of that, the interface lets us change only table name and add new columns when dealing with SQLite databases (it is still not the case in OmniDB Python version, as it currently supports only PostgreSQL databases).</li>
</ul>
<p>We will create example tables (<em>Customer</em> and <em>Address</em>) in the <code>testdb</code> database we connected to earlier. Right click on the <strong>Tables</strong> node and select the <strong>New Table</strong> action:</p>
<p><img src="../img/06_table_management_01.png" /></p>
<p>We will create the table <em>Customer</em> with a primary key that will be referenced by the table <em>Address</em>:</p>
<p><img src="../img/06_table_management_02.png" /></p>
<p><img src="../img/06_table_management_03.png" /></p>
<p>Note how the table appers in the <em>Tables</em> tree node:</p>
<p><img src="../img/06_table_management_04.png" /></p>
<p>Now create the table <em>Address</em> with a primary key and a foreign key:</p>
<p><img src="../img/06_table_management_05.png" /></p>
<p><img src="../img/06_table_management_06.png" /></p>
<p>At this point we have two tables in schema <code>public</code>. The schema structure can be seen with the graph feature by right clicking on the schema <code>public</code> node of the tree and selecting <em>Render Graph &gt; Simple Graph</em>:</p>
<p><img src="../img/06_table_management_07.png" /></p>
<p><img src="../img/06_table_management_08.png" /></p>
<p>And this is what the <em>Complete Graph</em> looks like:</p>
<p><img src="../img/06_table_management_09.png" /></p>
<h2 id="editing-tables"><span class="header-section-number">6.2</span> Editing tables</h2>
<p>OmniDB also lets you edit existing tables (always following DBMS limitations). To test this feature we will add a new column to the table <em>Customer</em>. To access the alter table interface just right click the table node and select the action <em>Table Actions &gt; Alter Table</em>:</p>
<p><img src="../img/06_table_management_10.png" /></p>
<p>Add the column <em>cust_age</em> and save:</p>
<p><img src="../img/06_table_management_11.png" /></p>
<p>The interface is capable of detecting errors that may occur during alter table operations, showing the command and the error that occurred. To demonstrate it we will try to add the column <em>cust_name</em>, which already belongs to this table:</p>
<p><img src="../img/06_table_management_12.png" /></p>
<h2 id="removing-tables"><span class="header-section-number">6.3</span> Removing tables</h2>
<p>In order to remove a table just right click the table node and select the action <em>Table Actions &gt; Drop Table</em>:</p>
<p><img src="../img/06_table_management_13.png" /></p>
</body>
</html>
